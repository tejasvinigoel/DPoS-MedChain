{% extends "base.html" %}
{% block content %}
<div class="hero">
    <h1>Patient Dashboard</h1>
    <p>Review and approve new medical records that require your consent.</p>
</div>

{% if records %}
<div class="dashboard">
    <h2 style="color:white; grid-column: 1 / -1; text-align:center; margin-bottom:1rem;">Records Awaiting Your Approval</h2>
    {% for record in records %}
    <div class="card">
        <div class="card-icon"><i class="fas fa-file-medical-alt"></i></div>
        <h3>{{ record.record_id }} ({{ record.record_type }})</h3>
        <p><strong>Doctor:</strong> {{ record.doctor_id }} | <strong>Hospital:</strong> {{ record.hospital_id }}</p>
        <p><strong>Details:</strong> {{ record.prescription }}</p>

        <div style="display: flex; gap: 1rem; justify-content: center; margin-top: 1.5rem;">
            <form action="{{ url_for('approve_record', tx_hash=record.hash) }}" method="POST">
                <button type="submit" class="btn">
                    <i class="fas fa-check-circle"></i> Approve
                </button>
            </form>
            <form action="{{ url_for('deny_record', tx_hash=record.hash) }}" method="POST">
                <button type="submit" class="btn" style="background: linear-gradient(45deg, #ff6b6b, #f06595);">
                    <i class="fas fa-times-circle"></i> Deny
                </button>
            </form>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
    <div class="card" style="max-width: 800px; margin: 2rem auto; text-align:center;">
        <h3 style="color:white;">No Pending Records</h3>
        <p style="color: rgba(255,255,255,0.8);">There are currently no new medical records waiting for your approval.</p>
    </div>
{% endif %}
{% endblock %}