{% extends "base.html" %}
{% block content %}
<div class="hero">
    <h1>View Patient History</h1>
    <p>Securely view medical records stored on the blockchain</p>
</div>

<div class="card" style="max-width: 800px; margin: 0 auto;">
    <form method="POST">
        <div class="mb-3">
            <label for="viewer_id" class="form-label">Your User ID</label>
            <input type="text" class="form-control" id="viewer_id" name="viewer_id" placeholder="Enter your user ID" required>
        </div>

        <button type="submit" class="btn">
            <i class="fas fa-search"></i>
            View History
        </button>
    </form>
</div>

{% if history %}
<div class="dashboard" style="margin-top: 2rem;">
    {% for record in history %}
    <div class="card">
        <div class="card-icon">
            <i class="fas fa-notes-medical"></i>
        </div>
        <h3>{{ record.record_id }} ({{ record.record_type }})</h3>
        <p>
            <strong>Operation:</strong> {{ record.operation }} | 
            <strong>Doctor:</strong> {{ record.doctor_id }} | 
            <strong>Hospital:</strong> {{ record.hospital_id }}
        </p>
        <p><strong>Details:</strong> {{ record.prescription }}</p>
        <p><small><strong>Timestamp:</strong> {{ record.timestamp }}</small></p>
    </div>
    {% endfor %}
</div>
{% endif %}

<style>
    .form-label {
        color: white;
        font-weight: 500;
    }

    .form-control {
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 10px;
        color: white;
        padding: 0.75rem 1rem;
        width: 100%;
        transition: all 0.3s ease;
    }

    .form-control:focus {
        background: rgba(255, 255, 255, 0.15);
        border-color: #4facfe;
        box-shadow: 0 0 0 0.2rem rgba(79, 172, 254, 0.25);
        color: white;
    }

    .form-control::placeholder {
        color: rgba(255, 255, 255, 0.6);
    }

    .mb-3 {
        margin-bottom: 1.5rem;
    }

    .card {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        border: 1px solid rgba(255, 255, 255, 0.2);
        padding: 2rem;
        transition: all 0.3s ease;
    }

    .card-icon {
        font-size: 2.5rem;
        margin-bottom: 1rem;
        color: #4facfe;
    }
</style>
{% endblock %}
